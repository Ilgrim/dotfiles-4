# My tmux config uses folds in vim.
#
# zR    open all folds
# zM    close all folds
# za    toggle fold at cursor position
# zj    move down to start of next fold
# zk    move up to end of previous fold

# General tmux settings                                         {{{1
# ------------------------------------------------------------------

# Set up tmux to use os x clipboard
# TODO: Default command isn't doing anything for me
#set -g default-command "/usr/local/bin/reattach-to-user-namespace -l zsh"
bind C-c run "tmux save-buffer - | reattach-to-user-namespace pbcopy"
bind C-v run "reattach-to-user-namespace pbpaste | tmux load-buffer - && tmux paste-buffer"

# set the command prefix to match screen
set -g prefix C-a
unbind C-b
# Allow for C-a C-a to send it to the application
# XXX: This doesn't seem to work
bind C-a send-prefix

# Set the proper terminal type
set -g default-terminal "screen-256color"

# Set the delay so that it doesn't interfere with applications like
# vim
set -sg escape-time 0

# Make window and pane indexes start with 1
set -g base-index 1
setw -g pane-base-index 1

# use vi key bindings
setw -g mode-keys vi

# turn on mouse mode
setw -g mode-mouse on
set -g mouse-select-pane on
set -g mouse-resize-pane on
set -g mouse-select-window on

# set the scrollback
set -g history-limit 20000

# force tmux to use utf-8
setw -g utf8 on

# Custom key bindings                                            {{{1
# ------------------------------------------------------------------

# Reload the tmux config
bind r source-file ~/.tmux.conf \; display "tmux config reloaded!"

# use escape to get into copy mode like screen
bind Escape copy-mode -u

# screen like logging of the current window
bind H pipe-pane -o 'cat >> $HOME/#W-`date +%s`-tmux.log'

# Easier window controls                                        {{{2
# ------------------------------------------------------------------

# Window splits
bind | split-window -h
bind - split-window -v

# Vim style pane movement
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Pane re-sizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Appearance Settings                                           {{{1
# ------------------------------------------------------------------

# Status line
set -g status-fg white
set -g status-bg black

# Window list
setw -g window-status-fg cyan 
setw -g window-status-bg default 
setw -g window-status-attr dim

# Active windows
setw -g window-status-current-fg white 
setw -g window-status-current-bg red 
setw -g window-status-current-attr bright

# Panes
set -g pane-border-fg green
set -g pane-border-bg black
set -g pane-active-border-fg white
set -g pane-active-border-bg yellow

# Messages
set -g message-fg white
set -g message-bg black
set -g message-attr bright

# Show notices when there is activity on another window
setw -g monitor-activity on
set -g visual-activity on

# Status Line                                                   {{{1
# ------------------------------------------------------------------

set -g status-left-length 40 
# Show current window, current pane and session name
set -g status-left "#[fg=yellow]#I #[fg=cyan]#P #[fg=green]#S"

# Force utf-8
set -g status-utf8 on

# Show the host name and current date
set -g status-right "#[fg=cyan]#h %d %b %R"

# Refresh every minute
set -g status-interval 60

# Center the list of windows
set -g status-justify centre

# turn on folds
# vim: fdm=marker
